#!/bin/bash

reset

#Définition de la taille de l'image:
set terminal png size 700,800

#Sauvegarde du graphique dans le fichier H_l.png:
set output 'H_t.png'

#Définit la plage de valeurs de l'axe des ordonnées:
set yrange [0:3500]

#Définit les pointillés:
set mytics 2

#On choisit le style du graphique dans ce cas un histogramme:
set style data histogram

#Regroupement des valeurs pour avoir (dans notre cas) 2 colomnes correspondant une valeure de l'axe des abscisses:
set style histogram cluster gap 1

#Définition du séparateur afin de séparer les données récupérées:
set datafile sep ";"

#Création de la bordure des barres:
set style fill solid border -1

#Modifications pour que les barres soient moins opaque:
set style fill transparent solid 1 noborder

#Largeur de la colomne définit:
set boxwidth 0.9

#Définit le format de l'axe des abscisses (dans ce cas on garde celui par défaut):
set xtics format ""

#Définit le marquage sur le graphe entier de l'axe des ordonées:
set grid ytics

#Déplace le graphique en laissant une marge en bas qu'on définit:
set lmargin at screen 0.2

#Déplace le graphique en laissant une marge en bas qu'on définit:
set bmargin at screen 0.15

#Retire tous les titres:
unset title

#Retire le marquage de l'axe des ordonnées sur le graphe:
unset grid


set border lw 2

#Création du "TOWN NAMES" selon les coordonnées suivantes:
set label 1 'TOWN NAMES' at graph 0.4, -0.099 centre

#Création du texte "NB ROUTES" selon les coordonnées suivantes:
set label 3 'NB ROUTES' at graph -0.2, 0.45 left rotate by 90

#Pivote de 45° les abscisses(même chose que pour les ordonées donc juste les id):
set xtic rotate by 45 scale 0.90

#Déplace les id en changeant leur position:
set xtics offset -3, graph -0.06

#Définit la police de l'axe des abscisses:
set xtics font ",15"

#Définit la police de l'axe des ordonnées:
set ytics font ",15"

set key font ",12"

#Création des barres de couleur définit en hexa en rajoutant une légende correspondant aux différentes colonnes:
plot "data1.txt" using 2:xtic(1) title "Total routes" linecolor rgb "#cf0761", \
     "data1.txt" using 3 title "First town" linecolor rgb "#6c344d"
